<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Trash2Treasure</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="/Users/akshitakaushik/Downloads/Favicon.jpeg">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
  <nav class="eco-navbar-horizontal">
    <div class="nav-container">
      <!-- LOGO -->
      <div class="nav-logo">
        <span>Trash2Treasure</span>
      </div>

      <!-- NAV LINKS (HORIZONTAL) -->
      <ul class="nav-menu">
        <li><a href="#" class="nav-link active" onclick="showPage('home')">Home</a></li>
        <li><a href="announcements1.html" target="_blank" class="nav-link"
            onclick="showPage('community')">Announcements</a></li>
        <li><a href="my_impact.html" target="_blank" class="nav-link" onclick="showPage('impact')">Impact</a></li>
        <li><a href="dashboard.html" target="_blank" class="nav-link" onclick="showPage('dashboard')">Dashboard</a></li>
        <li><a href="community.html" target="_blank" class="nav-link" onclick="showPage('community')">Community</a></li>
        <li><a href="admin.html" target="_blank" class="nav-link" onclick="showPage('admin')">Admin</a></li>
      </ul>
    </div>
  </nav>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <section class="hero">
    <div class="overlay"></div>
    <div class="content">
      <h1></h1>
      <h1>Trash Today,<br>Treasure Tomorrow.</h1>
      <p>Transforming everyday waste into sustainable treasures for a greener future.</p>
      <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#authModal">
        Get Started
      </button>
    </div>
  </section>

  <!-- Mission Section -->
  <section id="mission" class="section">
    <h2>Our Mission</h2>
    <p>
      Our mission is to make e-waste recycling simple, transparent, and rewarding.
      We aim to educate the community and create a sustainable environment
      where trash becomes treasure.
    </p>
  </section>

  <!-- SIGNUP / LOGIN MODAL -->
  <div class="bootstrap-scope">
    <div class="modal fade" id="authModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

          <div class="modal-header">
            <h5 class="modal-title">Welcome to Trash2Treasure</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>

          <div class="modal-body">
            <!-- TABS -->
            <ul class="nav nav-pills mb-3 justify-content-center">
              <li class="nav-item">
                <button class="nav-link active" data-bs-toggle="pill" data-bs-target="#signupTab">
                  Signup
                </button>
              </li>
              <li class="nav-item">
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#loginTab">
                  Login
                </button>
              </li>
            </ul>

            <div class="tab-content">
              <!-- SIGNUP -->
              <div class="tab-pane fade show active" id="signupTab">
                <form>
                  <!-- EMAIL -->
                  <div class="mb-3">
                    <label class="form-label">Email address</label>
                    <input type="email" class="form-control" id="txtEmail" required>
                    <div class="form-text">We'll never share your email with anyone else.</div>
                    <div style="display:flex; gap:10px;">
                      <div id="errPicE"></div>
                      <div id="errMsgE"></div>
                    </div>
                  </div>

                  <!-- PASSWORD -->
                  <div class="mb-3">
                    <label class="form-label">
                      Password
                      <i class="fa-solid fa-eye" id="eye"></i>
                    </label>
                    <input type="password" class="form-control" id="txtPwd" required>
                    <div id="lblPwd" style="color:red;"></div>
                  </div>

                  <!-- USER TYPE -->
                  <div class="mb-3">
                    <label class="form-label">I AM</label>
                    <select class="form-select" id="combouser" required>
                      <option value="">Select</option>
                      <option value="ORGANIZATION">ORGANIZATION</option>
                      <option value="USER">USER</option>
                      <option value="ADMIN">ADMIN</option>
                    </select>
                  </div>

                  <!-- SIGNUP BUTTON -->
                  <button type="button" class="btn btn-success w-100" id="Signup">
                    Signup
                  </button>
                </form>
              </div>

              <!-- LOGIN -->
              <div class="tab-pane fade" id="loginTab">
                <form>
                  <div class="mb-3">
                    <input type="email" class="form-control" placeholder="Email" required>
                  </div>
                  <div class="mb-3">
                    <input type="password" class="form-control" placeholder="Password" required>
                  </div>
                  <button type="button" class="btn btn-primary w-100" onclick="loginUser()">
                    Login
                  </button>
                </form>
              </div>

            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- MAP SECTION -->
  <section class="map-section">
    <div class="map-container">
      <div class="map-box">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d416.67377300019757!2d74.92641618799452!3d30.20507987139332!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x391733554ee53cb1%3A0x9ab85c6f1f9ea895!2sCrorepati%20Grocery%20Shop!5e0!3m2!1sen!2sin!4v1753357134024!5m2!1sen!2sin"
          loading="lazy" referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>

      <div class="map-info">
        <h2>üìç Our Collection Center</h2>
        <p>
          Drop your e-waste responsibly at our nearby collection point.
          We ensure safe recycling and a greener future üåç
        </p>
        <p><strong>Location:</strong> Chitkara University, Punjab, India</p>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="eco-footer">
    <div class="footer-container">
      <!-- BRAND -->
      <div class="footer-section">
        <h3>Trash2Treasure</h3>
        <p>Creating value from waste, building a cleaner, greener planet together.</p>
      </div>

      <!-- QUICK LINKS -->
      <div class="footer-section">
        <h4>Quick Links</h4>
        <ul>
          <li><a href="#" onclick="showPage('home')">Home</a></li>
          <li><a href="announcement.html" onclick="showPage('announcements')">Announcements</a></li>
          <li><a href="my_impact.html" onclick="showPage('impact')">Impact</a></li>
        </ul>
      </div>

      <!-- CONTACT -->
      <div class="footer-section">
        <h4>Contact Us</h4>
        <p>üìß Email: <a href="mailto:trash2treasure@gmail.com">trash2treasure@gmail.com</a></p>
        <p>üìû Phone: +91 98765 43210</p>
        <p>üìç India</p>
      </div>

      <!-- SOCIAL -->
      <div class="footer-section">
        <h4>Follow Us</h4>
        <div class="social-links">
          <a href="#">üåê</a>
          <a href="#">üìò</a>
          <a href="#" target="_blank">
            <img
              src="https://joshuaaaronmusic.com/wp-content/uploads/2020/04/computer-icons-instagram-logo-sticker-logo-instagram-logo-png-clip-art.png"
              alt="Instagram" class="social-icon">
          </a>
        </div>
      </div>
    </div>

    <!-- BOTTOM -->
    <div class="footer-bottom">
      ¬© 2026 Trash2Treasure | Built for a greener tomorrow üå±
    </div>
  </footer>

  <!-- FIREBASE SCRIPT -->
  <script type="module">
    // üî• IMPORT FIREBASE SDKs
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
    import {
      getAuth,
      createUserWithEmailAndPassword,
      signInWithEmailAndPassword
    } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";
    import {
      getFirestore,
      setDoc,
      getDoc,
      doc
    } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

    // üîë YOUR FIREBASE CONFIG
    const firebaseConfig = {
      apiKey: "AIzaSyARfqEhO4QNWWGQMHkZqdleN93MVjhDzBg",
      authDomain: "trash2treasure-94c3d.firebaseapp.com",
      projectId: "trash2treasure-94c3d",
      storageBucket: "trash2treasure-94c3d.firebasestorage.app",
      messagingSenderId: "305055837711",
      appId: "1:305055837711:web:03450570554d64ae2f7d7a"
    };

    // üöÄ INIT FIREBASE
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // =========================
    // üìù SIGNUP FUNCTION
    // =========================
    document.getElementById("Signup").addEventListener("click", async () => {
      const btn = document.getElementById("Signup");
      const email = txtEmail.value.trim();
      const password = txtPwd.value.trim();
      const role = combouser.value;

      if (!email || !password || !role) {
        alert("Please fill all fields");
        return;
      }

      if (password.length < 6) {
        alert("Password must be at least 6 characters");
        return;
      }

      btn.innerText = alert("Signup successful üéâ Please login");
      btn.disabled = true;

      try {
        const cred = await createUserWithEmailAndPassword(auth, email, password);

        // üîê Store ONLY safe data (NO PASSWORD)
        await setDoc(doc(db, "users", cred.user.uid), {
          email,
          role,
          createdAt: new Date()
        });



        btn.innerText = "Signup";
        btn.disabled = false;

      } catch (error) {
        alert("Signup successful üéâ Please login");
        btn.innerText = "Signup";
        btn.disabled = false;
      }
    });

    // =========================
    // üîê LOGIN FUNCTION
    // =========================
    window.loginUser = async function () {
      const email = document.querySelector("#loginTab input[type=email]").value;
      const password = document.querySelector("#loginTab input[type=password]").value;

      try {
        const userCred = await signInWithEmailAndPassword(auth, email, password);

        const docRef = doc(db, "users", userCred.user.uid);
        const docSnap = await getDoc(docRef);

        if (docSnap.exists()) {
          const role = docSnap.data().role;

          alert("Login successful ‚úÖ");

          if (role === "ADMIN") {
            window.location.href = "admin.html";
          } else if (role === "ORGANIZATION") {
            window.location.href = "community.html";
          } else {
            window.location.href = "dashboard.html";
          }
        }
      } catch (error) {
        alert("Login successful ‚úÖ");
      }
    };
  </script>

</body>

</html>
